<!DOCTYPE html>
<html>
  <head>
    <title>Stealth Wallet</title>
    <meta charset="UTF-8">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@nero_eth">
    <meta name="twitter:title" content="Stealth Wallet">
    <meta name="twitter:description" content="Ethereum - Stealth Wallet">
    <meta property="og:title" content="Stealth-Wallet.xyz" relay="" api="" dashboard="">
    <meta property="og:site_name" content="https://nerolation.github.io/stealth-wallet/">
    <meta property="og:url" content="https://nerolation.github.io/stealth-wallet/">
    <meta property="og:description" content="Ethereum Wallet Application supporting Stealth Address Transactions.">
    <meta property="og:type" content="website">
    <link rel="shortcut icon" href="static/img/swfavicon.png">
    <meta name="description" content="Ethereum Wallet Application supporting Stealth Address Transactions.">
    <meta name="keywords" content="Ethereum, Stealth Addresses, Privacy, EIP-5564">
    <meta name="author" content="Toni Wahrstätter">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="twitter:image" content="https://nerolation.github.io/stealth-wallet/static/img/ogimage.png">
    <meta property="og:image" content="https://nerolation.github.io/stealth-wallet/static/img/ogimage.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="scripts/website_logic.js" , type="text/javascript"></script>
    <script src="scripts/bundle.js" , type="text/javascript"></script>
    <link rel="stylesheet" href="static/style.css">
  </head>
  <body>
    <div class="welcome-screen" id="welcome-screen">
      <img src="static/img/logo.png" alt="stealth-wallet.xyz Logo" width="200" />
      <h1 class="welcome-screen-header">stealth-wallet.xyz</h1>
      <button class="enter-button" id="enter-button">Enter</button>
    </div>
    <div class="main-interface" id="main-interface">
    <div class="container mt-5">
      <div class="row">
        <div class="col-md-6 offset-md-3">
          <h1 class="text-center mb-4">Stealth Wallet</h1>
          <h5 class="text-center">Connect your Metamask wallet</h5>
          <p class="text-center mb-4">⚠️ Sepolia test net only ⚠️</p>
          <div class="form-group">
            <button id="connect-wallet-btn" class="btn-primary w-100 btn btn-outline-primary">Connect Wallet</button>
          </div>
          <div id="user-address" class="user-address d-none"></div>
          <div id="login">
            <div class="form-group mt-4">
              <label for="message-input">Sign the following message to login:</label>
              <textarea id="message-input" class="form-control" rows="3">I want to login into my stealth wallet.</textarea>
            </div>
            <div class="form-group">
              <button id="sign-message-btn" class="btn-primary w-100 btn mb-4 btn-outline-primary">Sign Message</button>
            </div>
          </div>
        </div>
      </div>
      <div id="personalSign"></div>
      <div id="user-stealth-meta-address" class="d-none">
        <div class="row">
          <div class="col-md-6 offset-md-3 .text-center mb-4">
            <h4 class="text-center mt-3 mb-0">Your Stealth Meta-Address:</h4>
            <div id="stealth-meta-address" class="user-address"></div>
            <button class="w-100 btn btn-outline-primary" id="copybuttonSMA">Copy to Clipboard</button>
          </div>
        </div>
        <div class="row mt-2">
          <div class="col-md-6 offset-md-3 d-flex justify-content-center">
            <button id="tab1-btn" type="button" class="btn btn-primary w-50">Send</button>
            <button id="tab2-btn" type="button" class="btn btn-secondary w-50">Receive</button>
          </div>
        </div>
        <div class="row mt-4">
          <div class="col-md-6 offset-md-3">
            <!-- Tab content -->
            <div id="tab1" class="tab-content">
              <h2>Send to a stealth meta-address</h2>
              <!-- Input fields -->
              <div class="form-group mb-2">
                <label for="input-string">Enter the stealth meta-address of the recipient:</label>
                <input type="text" class="form-control" id="input-stealth-meta-address" placeholder="st:eth:0x...">
              </div>
              <div class="form-group mb-1">
                  <label for="input-amount">Enter amount in ETH:</label>
                  <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">ETH</span>
                  </div>
                  <input type="number" step="0.01" class="form-control" id="input-amount" value="0.01" placeholder="Enter amount in ETH" min="0">
                </div>
              </div>
              <!-- Send button -->
              <div class="form-group">
                <button id="send-btn" class="btn-primary w-100 btn btn-outline-primary">Send</button>
              </div>
            </div>
            <div id="tab2" class="tab-content" style="display: none;">
              <h2> Receive to stealth address</h2>
              <label for="input-string">Press button to start parsing for your stealth addresses:</label>
              <button id="parse-btn" class="btn-primary w-100 btn btn-outline-primary mb-3">Parse</button>
              <div id="parsing-form" class="form-group d-none">
                <label for="input-string">Stealth Address:</label>
                <div class="input-group mb-2">
                  <input id="parsing-output-stealth-address" class="form-control" type="text" placeholder="0x..." readonly>
                  <div class="input-group-append">
                   <button class="btn btn-light" id="basic-addon2">View in Explorer</button>
                 </div>
                </div>
                <label for="input-string">Stealth Private Key:</label>
                <input id="parsing-output-stealth-private-key" class="form-control mb-1" type="text" placeholder="0x..." readonly>
                <button class="w-100 btn btn-outline-primary" id="copybuttonSPK">Copy to Clipboard</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-4">
        <div class="col-md-6 offset-md-3">
          <footer class="footer mt-auto py-3 bg-light">
            <div class="container text-center">
              <span style="font-size: 1.1rem;" class="text-muted">Check out <a href="https://nerolation.github.io/stealth-utils/" target="_blank">this</a> tutorial to find more info about stealth addresses. </span>
              <br>
              <span style="font-size: 1.1rem;" class="text-muted">View <a href="https://github.com/nerolation/stealth-wallet" target="_blank">source code</a> on Github </span>
              <br>
              <span style="font-size: 1.15rem;" class="text-muted">&copy; <a href="https://twitter.com/nero_eth" target="_blank">Toni Wahrstätter</a> 2023 </span>
            </div>
          </footer>
        </div>
      </div>
    </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="transactionModal" tabindex="-1" aria-labelledby="transactionModalLabel" aria-hidden="true" data-bs-backdrop="true" data-bs-keyboard="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="transactionModalLabel">Transaction Summary</h5>
          </div>
          <div class="modal-body">
            <p id="modal-stealth-address">Stealth Address: </p>
            <p id="modal-amount">Amount
              <span class="icon-ok-sign" data-bs-toggle="tooltip"
              data-bs-placement="top" title="Note: If this is your first interaction with the Messenger contract from your connected account, then
              0.001 ETH from the amount are staked within the `Messenger` contract. The staking is required for security reasons and can be withdrawn at any time.
              Furthermore, it is unslashable. Staking provides your recipients with prioritized treatment in the parsing process.">
                <img class="bi bi-info-circle-fill" src="static/img/info-circle-fill.svg"></img>
              </span>:
            </p>
            <p id="modal-status">Status: Waiting for confirmation...</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.min.js" integrity="sha384-heAjqF+bCxXpCWLa6Zhcp4fu20XoNIA98ecBC1YkdXhszjoejr5y9Q77hIrv8R9i" crossorigin="anonymous"></script>
  </body>
</html>
